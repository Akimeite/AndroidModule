language: android
dist: trusty
jdk: oraclejdk8
sudo: required

before_cache:
  - rm -f ${TRAVIS_BUILD_DIR}/gradle/caches/modules-2/modules-2.lock

cache:
  directories:
    - ${TRAVIS_BUILD_DIR}/gradle/caches/
    - ${TRAVIS_BUILD_DIR}/gradle/wrapper/dists/

notifications:
  email: false

android:
  components:
    - tools
    - build-tools-29.0.2
    - platform-tools
    - tools

env:
  global:
    - DIR=constraint-layout-start
    - API=29
    - TAG=google_apis
    - ABI=armeabi-v7a
    - QEMU_AUDIO_DRV=none
    - GRADLE_USER_HOME="${TRAVIS_BUILD_DIR}/gradle"
    - ANDROID_HOME=/usr/local/android-sdk
    - TOOLS=${ANDROID_HOME}/tools
    - PATH=${ANDROID_HOME}:${TOOLS}:${TOOLS}/bin:${ANDROID_HOME}/platform-tools:${PATH}
    - ADB_INSTALL_TIMEOUT=20

before_install:
  - echo 'count=0' > /home/travis/.android/repositories.cfg

install:
  - sdkmanager --list || true
#  - sdkmanager --uninstall "system-images;android-15;default;armeabi-v7a"
#  - sdkmanager --uninstall "system-images;android-16;default;armeabi-v7a"
#  - sdkmanager --uninstall "system-images;android-17;default;armeabi-v7a"
#  - sdkmanager --uninstall "system-images;android-18;default;armeabi-v7a"
#  - sdkmanager --uninstall "system-images;android-19;default;armeabi-v7a"
#  - sdkmanager --uninstall "system-images;android-21;default;armeabi-v7a"
#  - sdkmanager --uninstall "extras;google;google_play_services"
#  - sdkmanager --uninstall "extras;android;support"
#  - sdkmanager --uninstall "platforms;android-10"
#  - sdkmanager --uninstall "platforms;android-15"
#  - sdkmanager --uninstall "platforms;android-16"
#  - sdkmanager --uninstall "platforms;android-17"
#  - sdkmanager --uninstall "platforms;android-18"
#  - sdkmanager --uninstall "platforms;android-19"
#  - sdkmanager --uninstall "platforms;android-20"
#  - sdkmanager --uninstall "platforms;android-21"
#  - sdkmanager --uninstall "build-tools;21.1.2"
#  - echo yes | sdkmanager "tools"
#  - echo yes | sdkmanager "platforms;android-29"
#  - echo yes | sdkmanager "platforms;android-${API}"
#  - echo yes | sdkmanager "extras;android;m2repository"
#  - echo yes | sdkmanager "extras;google;m2repository"
#  - cd ${TRAVIS_BUILD_DIR}/${DIR} && ./gradlew --version
#  - cd ${TRAVIS_BUILD_DIR}/${DIR} && ./gradlew clean assembleDebug
#  - sdkmanager --list || true